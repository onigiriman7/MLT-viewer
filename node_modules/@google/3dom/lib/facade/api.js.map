{"version":3,"file":"api.js","sourceRoot":"","sources":["../../src/facade/api.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;GAaG","sourcesContent":["/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {RGBA} from '../api.js';\nimport {GLTF, GLTFElement, MagFilter, MinFilter, WrapMode} from '../gltf-2.0.js';\nimport {SerializedImage, SerializedMaterial, SerializedModel, SerializedPBRMetallicRoughness, SerializedSampler, SerializedTexture, SerializedThreeDOMElement} from '../protocol.js';\n\n/**\n * Implementation common to all elements in the 3DOM facade domain.\n */\nexport interface ThreeDOMElement {\n  readonly ownerModel: Model;\n  readonly internalID: number;\n  readonly name: string|null;\n  readonly sourceObject: GLTF|GLTFElement;\n\n  /**\n   * Mutate a property on the element. Throws for all properties and values that\n   * are not explicitly supported by the implementation.\n   */\n  mutate(property: string, value: unknown): Promise<void>;\n\n  /**\n   * Serialize the element so that it can be transferred to another context.\n   */\n  toJSON(): SerializedThreeDOMElement;\n}\n\n/**\n * A facade that wraps an underlying renderer's notion of PBR material\n * properties\n *\n * @see https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#pbrmetallicroughness\n */\nexport interface PBRMetallicRoughness extends ThreeDOMElement {\n  readonly baseColorFactor: RGBA;\n\n  mutate(property: 'baseColorFactor', value: RGBA): Promise<void>;\n\n  toJSON(): SerializedPBRMetallicRoughness;\n}\n\n/**\n * A facade that wraps an underlying renderer's notion of a material\n *\n * @see https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#material\n */\nexport interface Material extends ThreeDOMElement {\n  readonly pbrMetallicRoughness: PBRMetallicRoughness|null;\n\n  readonly normalTexture: TextureInfo|null;\n  readonly occlusionTexture: TextureInfo|null;\n  readonly emissiveTexture: TextureInfo|null;\n\n  toJSON(): SerializedMaterial;\n}\n\n/**\n * A facade that wraps an underlying renderer's notion of an image\n *\n * @see https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#image\n */\nexport interface Image {\n  mutate(property: 'uri', value: string): Promise<void>;\n\n  toJSON(): SerializedImage;\n}\n\n/**\n * A facade that wraps an underlying renderer's notion of a sampler\n *\n * @see https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#sampler\n */\nexport interface Sampler {\n  mutate(property: 'minFilter', value: MinFilter|null): Promise<void>;\n  mutate(property: 'magFilter', value: MagFilter|null): Promise<void>;\n  mutate(property: 'wrapS'|'wrapT', value: WrapMode|null): Promise<void>;\n\n  toJSON(): SerializedSampler;\n}\n\n/**\n * A facade that wraps an underlying renderer's notion of a texture\n *\n * @see https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#texture\n */\nexport interface Texture extends ThreeDOMElement {\n  mutate(property: 'source'|'sampler', value: number|null): Promise<void>;\n\n  toJSON(): SerializedTexture;\n}\n\n/**\n * A facade that wraps an underlying renderer's notion of a texture\n *\n * @see https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#texture\n */\nexport interface TextureInfo extends ThreeDOMElement {\n  mutate(property: 'texture', value: number|null): Promise<void>;\n}\n\n/**\n * A facade that wraps an underlying renderer's notion of a glTF model\n *\n * @see https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#gltf\n */\nexport interface Model extends ThreeDOMElement {\n  readonly materials: Array<Material>;\n  toJSON(): SerializedModel;\n}\n\n/**\n * The API that must be implemented in order for an underlying rendere to be\n * manipulated by a ThreeDOMExecutionContext\n *\n * @see ../context.ts\n */\nexport interface ModelGraft extends EventTarget {\n  /**\n   * A flat list of all unique materials found in this scene graph.\n   *\n   * TODO(#1003): How do we handle non-active scenes?\n   * TODO(#1002): Desctibe and enforce traversal order\n   */\n  readonly model: Model;\n\n  /**\n   * Mutates a ThreeDOMElement. An element is mutated by:\n   *\n   *  1. Looking up the element by the given ID\n   *  2. Assigning value to the given property key\n   */\n  mutate(id: number, property: string, value: unknown): Promise<void>;\n}\n"]}